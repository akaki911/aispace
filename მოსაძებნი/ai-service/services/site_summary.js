/**
 * Bakhmaro Booking Platform - Static Site Information
 * рЃ«рЃћрЃџрЃўрЃЌ рЃЏрЃЮрЃЏрЃќрЃљрЃЊрЃћрЃЉрЃБрЃџрЃў рЃЉрЃљрЃќрЃўрЃАрЃБрЃарЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ рЃќрЃБрЃАрЃбрЃў рЃърЃљрЃАрЃБрЃ«рЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА
 */

const BAKHMARO_PLATFORM_INFO = {
  title: "рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА рЃЉрЃБрЃЎрЃўрЃюрЃњ рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃљ",
  description: "рЃЉрЃБрЃюрЃћрЃЉрЃарЃўрЃЋрЃў рЃњрЃљрЃюрЃАрЃЋрЃћрЃюрЃћрЃЉрЃўрЃА рЃљрЃЊрЃњрЃўрЃџрЃћрЃЉрЃўрЃА рЃЮрЃюрЃџрЃљрЃўрЃю рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ",

  // рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃћрЃЉрЃў
  categories: {
    cottages: {
      name: "рЃЎрЃЮрЃбрЃћрЃ»рЃћрЃЉрЃў",
      description: "рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЊрЃљрЃАрЃЋрЃћрЃюрЃћрЃЉрЃўрЃА рЃюрЃљрЃњрЃћрЃЉрЃЮрЃЉрЃћрЃЉрЃў",
      features: ["рЃАрЃљрЃЏрЃќрЃљрЃарЃћрЃБрЃџрЃЮ", "рЃАрЃљрЃФрЃўрЃюрЃћрЃЉрЃћрЃџрЃў", "рЃЎрЃЮрЃЏрЃцрЃЮрЃарЃбрЃБрЃџрЃў рЃљрЃЋрЃћрЃ»рЃў", "рЃЎрЃћрЃарЃФрЃЮ рЃбрЃћрЃарЃўрЃбрЃЮрЃарЃўрЃљ"]
    },
    hotels: {
      name: "рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮрЃћрЃЉрЃў", 
      description: "рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮ рЃбрЃўрЃърЃўрЃА рЃњрЃљрЃюрЃЌрЃљрЃЋрЃАрЃћрЃЉрЃљ",
      features: ["рЃЏрЃЮрЃЏрЃАрЃљрЃ«рЃБрЃарЃћрЃЉрЃљ", "рЃЎрЃЋрЃћрЃЉрЃљ", "рЃЊрЃљрЃАрЃБрЃцрЃЌрЃљрЃЋрЃћрЃЉрЃљ", "рЃЏрЃўрЃЏрЃдрЃћрЃЉрЃў"]
    },
    vehicles: {
      name: "рЃАрЃљрЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃЮ рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃћрЃЉрЃў",
      description: "рЃЏрЃњрЃќрЃљрЃЋрЃарЃЮрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА рЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃў",
      features: ["ATV", "рЃЉрЃўрЃфрЃўрЃЎрЃџрЃћрЃЉрЃў", "рЃ»рЃўрЃърЃћрЃЉрЃў", "рЃбрЃБрЃарЃўрЃАрЃбрЃБрЃџрЃў рЃљрЃЋрЃбрЃЮрЃЉрЃБрЃАрЃћрЃЉрЃў"]
    },
    horses: {
      name: "рЃфрЃ«рЃћрЃюрЃћрЃЉрЃў",
      description: "рЃфрЃ«рЃћрЃюрЃЮрЃАрЃюрЃЮрЃЉрЃўрЃА рЃАрЃћрЃарЃЋрЃўрЃАрЃў",
      features: ["рЃфрЃ«рЃћрЃюрЃўрЃЌ рЃбрЃБрЃарЃў", "рЃфрЃ«рЃћрЃюрЃЮрЃАрЃюрЃЮрЃЉрЃўрЃА рЃбрЃарЃћрЃюрЃўрЃюрЃњрЃћрЃЉрЃў", "рЃћрЃЦрЃАрЃЎрЃБрЃарЃАрЃўрЃћрЃЉрЃў"]
    },
    snowmobiles: {
      name: "рЃЌрЃЮрЃЋрЃџрЃЏрЃЮрЃЉрЃўрЃџрЃћрЃЉрЃў",
      description: "рЃќрЃљрЃЏрЃЌрЃарЃўрЃА рЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃў",
      features: ["рЃАрЃЎрЃў рЃбрЃарЃљрЃАрЃћрЃЉрЃќрЃћ рЃЏрЃњрЃќрЃљрЃЋрЃарЃЮрЃЉрЃљ", "рЃќрЃљрЃЏрЃЌрЃарЃўрЃА рЃбрЃБрЃарЃћрЃЉрЃў", "рЃћрЃЦрЃАрЃбрЃарЃћрЃЏрЃљрЃџрЃБрЃарЃў рЃАрЃърЃЮрЃарЃбрЃў"]
    }
  },

  // рЃбрЃћрЃЦрЃюрЃўрЃЎрЃБрЃарЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃћрЃЉрЃў
  technical_systems: {
    booking: {
      name: "рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ",
      process: [
        "рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў рЃўрЃарЃЕрЃћрЃЋрЃА рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃљрЃА",
        "рЃљрЃАрЃарЃЕрЃћрЃЋрЃА рЃЌрЃљрЃарЃўрЃдрЃћрЃЉрЃА рЃЊрЃљ рЃљрЃЊрЃљрЃЏрЃўрЃљрЃюрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљрЃА", 
        "рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ рЃ«рЃЊрЃћрЃЉрЃљ рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃўрЃАрЃљ",
        "рЃцрЃљрЃАрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ рЃбрЃљрЃарЃўрЃцрЃћрЃЉрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ",
        "рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃўрЃА рЃърЃарЃЮрЃфрЃћрЃАрЃў",
        "рЃЊрЃљрЃЊрЃљрЃАрЃбрЃБрЃарЃћрЃЉрЃљ рЃЊрЃљ рЃюрЃЮрЃбрЃўрЃцрЃўрЃЎрЃљрЃфрЃўрЃљ"
      ]
    },
    pricing: {
      name: "рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ",
      components: [
        "рЃЉрЃљрЃќрЃўрЃАрЃБрЃарЃў рЃцрЃљрЃАрЃћрЃЉрЃў рЃДрЃЮрЃЋрЃћрЃџ рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃљрЃќрЃћ",
        "рЃАрЃћрЃќрЃЮрЃюрЃБрЃарЃў рЃцрЃљрЃАрЃћрЃЉрЃў (рЃќрЃљрЃцрЃ«рЃБрЃџрЃў/рЃќрЃљрЃЏрЃЌрЃљрЃарЃў)",
        "рЃЊрЃдрЃћрЃћрЃЉрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ (рЃерЃљрЃЉрЃљрЃЌ-рЃЎрЃЋрЃўрЃарЃљ/рЃАрЃ«рЃЋрЃљ)",
        "рЃ«рЃљрЃюрЃњрЃарЃФрЃџрЃўрЃЋрЃЮрЃЉрЃўрЃА рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃћрЃЉрЃў",
        "рЃАрЃърЃћрЃфрЃўрЃљрЃџрЃБрЃарЃў рЃЮрЃцрЃћрЃарЃћрЃЉрЃў"
      ]
    },
    user_management: {
      name: "рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ",
      roles: [
        "Customer - рЃЕрЃЋрЃћрЃБрЃџрЃћрЃЉрЃарЃўрЃЋрЃў рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃћрЃџрЃў",
        "Provider - рЃЏрЃЮрЃЏрЃАрЃљрЃ«рЃБрЃарЃћрЃЉрЃўрЃА рЃърЃарЃЮрЃЋрЃљрЃўрЃЊрЃћрЃарЃў", 
        "Admin - рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃбрЃЮрЃарЃў",
        "Super Admin - рЃАрЃБрЃърЃћрЃа рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃбрЃЮрЃарЃў"
      ]
    }
  },

  // рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃћрЃЉрЃў
  admin_features: {
    dashboard: "рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃЊрЃљрЃцрЃљ рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃўрЃЌ",
    bookings: "рЃ»рЃљрЃЋрЃерЃюрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў",
    users: "рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃарЃЮрЃџрЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃљ",
    providers: "рЃърЃарЃЮрЃЋрЃљрЃўрЃЊрЃћрЃарЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃЎрЃЮрЃЏрЃўрЃАрЃўрЃћрЃЉрЃў",
    pricing: "рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ",
    notifications: "рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ",
    reports: "рЃљрЃюрЃљрЃџрЃўрЃбрЃўрЃЎрЃљ рЃЊрЃљ рЃарЃћрЃърЃЮрЃарЃбрЃћрЃЉрЃў"
  },

  // рЃбрЃћрЃЦрЃюрЃЮрЃџрЃЮрЃњрЃўрЃћрЃЉрЃў
  technologies: {
    frontend: "React + TypeScript + Tailwind CSS",
    backend: "Node.js + Express + Firebase",
    database: "Firestore (NoSQL)",
    auth: "Firebase Authentication", 
    ai: "Groq API (Llama models)",
    deployment: "Replit Platform"
  },

  // рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў
  core_features: [
    "рЃарЃћрЃљрЃџ-рЃЊрЃарЃЮрЃўрЃА рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃўрЃА рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ",
    "рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ",
    "рЃЏрЃарЃљрЃЋрЃљрЃџрЃћрЃюрЃЮрЃЋрЃљрЃюрЃў рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ (рЃЦрЃљрЃарЃЌрЃБрЃџрЃў/рЃўрЃюрЃњрЃџрЃўрЃАрЃБрЃарЃў)", 
    "рЃЏрЃЮрЃЉрЃљрЃўрЃџрЃќрЃћ рЃЮрЃърЃбрЃўрЃЏрЃўрЃќрЃћрЃЉрЃБрЃџрЃў рЃЊрЃўрЃќрЃљрЃўрЃюрЃў",
    "рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљрЃЊрЃў рЃЌрЃћрЃЏрЃљ (рЃЏрЃБрЃЦрЃў/рЃдрЃўрЃљ рЃарЃћрЃЪрЃўрЃЏрЃў)",
    "AI рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃў рЃбрЃћрЃЦрЃюрЃўрЃЎрЃБрЃарЃў рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃўрЃАрЃЌрЃЋрЃўрЃА",
    "рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ",
    "рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃўрЃА рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ"
  ]
};

// Enhanced рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў рЃерЃљрЃЉрЃџрЃЮрЃюрЃћрЃЉрЃў RAG рЃЮрЃърЃбрЃўрЃЏрЃўрЃќрЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА
const RESPONSE_TEMPLATES = {
  platform_overview: () => {
    return `­ЪЈћ№ИЈ **рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА рЃЉрЃБрЃЎрЃўрЃюрЃњ рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃљ**

­ЪЊІ **рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃћрЃЉрЃў:**
Рђб ­ЪЈа рЃЎрЃЮрЃбрЃћрЃ»рЃћрЃЉрЃў - рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃЊрЃљрЃАрЃЋрЃћрЃюрЃћрЃЉрЃўрЃА рЃюрЃљрЃњрЃћрЃЉрЃЮрЃЉрЃћрЃЉрЃў
Рђб ­ЪЈе рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮрЃћрЃЉрЃў - рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮ рЃбрЃўрЃърЃўрЃА рЃњрЃљрЃюрЃЌрЃљрЃЋрЃАрЃћрЃЉрЃљ  
Рђб ­ЪџЌ рЃАрЃљрЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃЮ рЃАрЃљрЃерЃБрЃљрЃџрЃћрЃЉрЃћрЃЉрЃў - ATV, рЃЉрЃўрЃфрЃўрЃЎрЃџрЃћрЃЉрЃў, рЃ»рЃўрЃърЃћрЃЉрЃў
Рђб ­Ъљј рЃфрЃ«рЃћрЃюрЃћрЃЉрЃў - рЃфрЃ«рЃћрЃюрЃЮрЃАрЃюрЃЮрЃЉрЃўрЃА рЃАрЃћрЃарЃЋрЃўрЃАрЃў рЃЊрЃљ рЃбрЃБрЃарЃћрЃЉрЃў
Рђб ­ЪЏи рЃЌрЃЮрЃЋрЃџрЃЏрЃЮрЃЉрЃўрЃџрЃћрЃЉрЃў - рЃќрЃљрЃЏрЃЌрЃарЃўрЃА рЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃў

РџЎ№ИЈ **рЃбрЃћрЃЦрЃюрЃўрЃЎрЃБрЃарЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃћрЃЉрЃў:**
Рђб рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ - рЃарЃћрЃљрЃџ-рЃЊрЃарЃЮрЃўрЃА рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃљ
Рђб рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ - рЃАрЃћрЃќрЃЮрЃюрЃБрЃарЃў рЃЊрЃљ рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ
Рђб рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ - 4 рЃбрЃўрЃърЃўрЃА рЃарЃЮрЃџрЃў
Рђб AI рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃў - рЃбрЃћрЃЦрЃюрЃўрЃЎрЃБрЃарЃў рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ

­ЪћД **рЃбрЃћрЃЦрЃюрЃЮрЃџрЃЮрЃњрЃўрЃћрЃЉрЃў:**
Рђб Frontend: React + TypeScript + Tailwind CSS
Рђб Backend: Node.js + Express + Firebase
Рђб Database: Firestore (NoSQL)
Рђб AI: Groq API (Llama models)
Рђб Deployment: Replit Platform`;
  },

  // NEW: Multi-stage project structure template
  project_structure_detailed: () => {
    return `­ЪЈЌ№ИЈ **рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ:**

­ЪЊЂ **Frontend Structure (src/):**
Рђб components/ - UI рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў рЃЊрЃљ рЃЋрЃўрЃ»рЃћрЃбрЃћрЃЉрЃў
  - BookingModal.tsx, Calendar.tsx, PricingManager.tsx
  - AIAssistantEnhanced.tsx, ThemeToggle.tsx
Рђб pages/ - рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃњрЃЋрЃћрЃарЃЊрЃћрЃЉрЃўрЃА рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў
  - MainPage.tsx, UserDashboard.tsx, AdminPages
Рђб services/ - рЃЉрЃўрЃќрЃюрЃћрЃА рЃџрЃЮрЃњрЃўрЃЎрЃўрЃА рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў
  - bookingService.ts, userService.ts, priceCodeService.ts
Рђб utils/ - рЃЊрЃљрЃЏрЃ«рЃЏрЃљрЃарЃћ рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў рЃЊрЃљ рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ
Рђб types/ - TypeScript рЃбрЃўрЃърЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃћрЃЉрЃў

­ЪЊЂ **Backend Structure (backend/):**
Рђб services/ - рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃўрЃА рЃџрЃћрЃўрЃћрЃарЃў
  - ai_controller.js, codeAnalyzer.js, groq_service.js
Рђб routes/ - API endpoints рЃЊрЃљ routing
Рђб controllers/ - рЃЉрЃўрЃќрЃюрЃћрЃА рЃџрЃЮрЃњрЃўрЃЎрЃўрЃА рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃћрЃарЃћрЃЉрЃў
Рђб utils/ - рЃЦрЃљрЃарЃЌрЃБрЃџрЃў рЃћрЃюрЃўрЃА рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ рЃЊрЃљ рЃАрЃ«рЃЋрЃљ рЃЊрЃљрЃЏрЃ«рЃЏрЃљрЃарЃћ рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў
Рђб middleware/ - рЃљрЃЋрЃЌрЃћрЃюрЃбрЃўрЃцрЃўрЃЎрЃљрЃфрЃўрЃљ рЃЊрЃљ error handling

­ЪЊЂ **Configuration & Assets:**
Рђб public/ - рЃАрЃбрЃљрЃбрЃўрЃЎрЃБрЃарЃў рЃцрЃљрЃўрЃџрЃћрЃЉрЃў
Рђб functions/ - Firebase Cloud Functions
Рђб attached_assets/ - рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃЏрЃўрЃЏрЃљрЃњрЃарЃћрЃЉрЃљ рЃЊрЃљ рЃбрЃћрЃАрЃбрЃћрЃЉрЃў`;
  },

  // NEW: Component mapping template
  component_mapping: () => {
    return `­ЪДЕ **рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃўрЃА рЃарЃБрЃЎрЃљ:**

­ЪЊІ **рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў UI рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў:**
Рђб BookingModal.tsx - рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃцрЃљрЃюрЃ»рЃљрЃарЃљ
Рђб Calendar.tsx - рЃЌрЃљрЃарЃўрЃдрЃћрЃЉрЃўрЃА рЃљрЃарЃЕрЃћрЃЋрЃўрЃА рЃЎрЃљрЃџрЃћрЃюрЃЊрЃљрЃарЃў
Рђб PricingManager.tsx - рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ рЃЊрЃљ рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃфрЃўрЃљ
Рђб AIAssistantEnhanced.tsx - AI рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃўрЃА рЃўрЃюрЃбрЃћрЃарЃцрЃћрЃўрЃАрЃў

­ЪЊІ **рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў:**
Рђб AdminCottages.tsx - рЃЎрЃЮрЃбрЃћрЃ»рЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ
Рђб AdminUsers.tsx - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ
Рђб MainDashboard.tsx - рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃЊрЃљрЃерЃЉрЃЮрЃарЃЊрЃў

­ЪЊІ **рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃўрЃА рЃџрЃћрЃўрЃћрЃарЃў:**
Рђб bookingService.ts - рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃДрЃЋрЃћрЃџрЃљ рЃџрЃЮрЃњрЃўрЃЎрЃљ
Рђб userService.ts - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ
Рђб priceCodeService.ts - рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃЎрЃљрЃџрЃЎрЃБрЃџрЃљрЃфрЃўрЃљ
Рђб notificationService.ts - рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ

­ЪЊІ **Backend API:**
Рђб ai_controller.js - AI рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃўрЃА рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃЎрЃЮрЃюрЃбрЃарЃЮрЃџрЃћрЃарЃў
Рђб index.js - Express server-рЃўрЃА entry point
Рђб memory_controller.js - AI рЃЏрЃћрЃ«рЃАрЃўрЃћрЃарЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ`;
  },

  // NEW: Key files mapping for RAG
  key_files_mapping: () => {
    return `­ЪЌѓ№ИЈ **рЃЏрЃюрЃўрЃерЃЋрЃюрЃћрЃџрЃЮрЃЋрЃљрЃюрЃў рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃарЃБрЃЎрЃљ:**

­Ъћ┤ **Critical Core Files:**
Рђб src/App.tsx - рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў React рЃљрЃърЃџрЃўрЃЎрЃљрЃфрЃўрЃљ
Рђб src/MainPage.tsx - рЃџрЃћрЃюрЃЊрЃўрЃюрЃњ рЃњрЃЋрЃћрЃарЃЊрЃў
Рђб backend/index.js - Backend server
Рђб backend/ai_controller.js - AI рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃџрЃЮрЃњрЃўрЃЎрЃљ

­ЪЪА **Business Logic Files:**
Рђб src/services/bookingService.ts - рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃџрЃЮрЃњрЃўрЃЎрЃљ
Рђб src/utils/pricing.ts - рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃўрЃА рЃљрЃџрЃњрЃЮрЃарЃўрЃЌрЃЏрЃћрЃЉрЃў
Рђб backend/services/groq_service.js - AI рЃЏрЃЮрЃЊрЃћрЃџрЃўрЃА рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ
Рђб src/components/BookingModal.tsx - рЃ»рЃљрЃЋрЃерЃюрЃўрЃА UI

­ЪЪб **Supporting Files:**
Рђб src/firebaseConfig.ts - Firebase рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
Рђб src/components/Calendar.tsx - рЃЌрЃљрЃарЃўрЃдрЃћрЃЉрЃўрЃА рЃџрЃЮрЃњрЃўрЃЎрЃљ
Рђб backend/memory_controller.js - AI рЃЎрЃЮрЃюрЃбрЃћрЃЦрЃАрЃбрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ
Рђб src/services/userService.ts - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА API

­Ъћх **Configuration Files:**
Рђб package.json - Dependencies
Рђб tsconfig.json - TypeScript рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
Рђб vite.config.mts - Build рЃЎрЃЮрЃюрЃцрЃўрЃњрЃБрЃарЃљрЃфрЃўрЃљ
Рђб firebase.json - Firebase deployment settings`;
  },

  booking_process: () => {
    return `­ЪЊЮ **рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃърЃарЃЮрЃфрЃћрЃАрЃў:**

1№ИЈРЃБ **рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃўрЃА рЃљрЃарЃЕрЃћрЃЋрЃљ** - рЃЎрЃЮрЃбрЃћрЃ»рЃў, рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮ, рЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃў
2№ИЈРЃБ **рЃЌрЃљрЃарЃўрЃдрЃћрЃЉрЃўрЃА рЃЏрЃўрЃЌрЃўрЃЌрЃћрЃЉрЃљ** - Check-in/Check-out рЃЊрЃарЃЮрЃћрЃЉрЃў
3№ИЈРЃБ **рЃърЃљрЃарЃљрЃЏрЃћрЃбрЃарЃћрЃЉрЃўрЃА рЃЊрЃљрЃДрЃћрЃюрЃћрЃЉрЃљ** - рЃљрЃЊрЃљрЃЏрЃўрЃљрЃюрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ, рЃАрЃърЃћрЃфрЃўрЃљрЃџрЃБрЃарЃў рЃЏрЃЮрЃЌрЃ«рЃЮрЃЋрЃюрЃћрЃЉрЃў
4№ИЈРЃБ **рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃўрЃА рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ** - рЃарЃћрЃљрЃџ-рЃЊрЃарЃЮрЃўрЃА рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃЊрЃљрЃю
5№ИЈРЃБ **рЃцрЃљрЃАрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ** - рЃАрЃћрЃќрЃЮрЃюрЃБрЃарЃў рЃбрЃљрЃарЃўрЃцрЃћрЃЉрЃў + рЃЏрЃЮрЃАрЃљрЃЎрЃарЃћрЃЉрЃџрЃћрЃЉрЃў
6№ИЈРЃБ **рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃўрЃА рЃърЃарЃЮрЃфрЃћрЃАрЃў** - рЃБрЃАрЃљрЃцрЃарЃЌрЃ«рЃЮ рЃЮрЃюрЃџрЃљрЃўрЃю рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃљ
7№ИЈРЃБ **рЃЊрЃљрЃЊрЃљрЃАрЃбрЃБрЃарЃћрЃЉрЃљ** - рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃюрЃЮрЃбрЃўрЃцрЃўрЃЎрЃљрЃфрЃўрЃљ`;
  },

  admin_panel: () => {
    return `­ЪЉеРђЇ­Ъњ╝ **рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃърЃљрЃюрЃћрЃџрЃў:**

­ЪЊі **рЃЏрЃЌрЃљрЃЋрЃљрЃарЃў рЃЊрЃљрЃцрЃљ:**
Рђб рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃљ рЃЊрЃљ рЃљрЃюрЃљрЃџрЃўрЃбрЃўрЃЎрЃљ
Рђб рЃарЃћрЃљрЃџ-рЃЊрЃарЃЮрЃўрЃА рЃ»рЃљрЃЋрЃерЃюрЃћрЃЉрЃўрЃА рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў
Рђб рЃерЃћрЃЏрЃЮрЃАрЃљрЃЋрЃџрЃўрЃА рЃљрЃюрЃњрЃљрЃарЃўрЃерЃћрЃЉрЃў

­ЪЈа **рЃњрЃљрЃюрЃЌрЃљрЃЋрЃАрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ:**
Рђб рЃЎрЃЮрЃбрЃћрЃ»рЃћрЃЉрЃўрЃА, рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЏрЃљрЃбрЃћрЃЉрЃљ/рЃарЃћрЃЊрЃљрЃЦрЃбрЃўрЃарЃћрЃЉрЃљ
Рђб рЃцрЃЮрЃбрЃЮрЃћрЃЉрЃўрЃА рЃЊрЃљ рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃљрЃ«рЃџрЃћрЃЉрЃљ
Рђб рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃўрЃА рЃЎрЃљрЃџрЃћрЃюрЃЊрЃљрЃарЃў

­ЪЉЦ **рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ:**
Рђб Customer, Provider, Admin рЃарЃЮрЃџрЃћрЃЉрЃў
Рђб рЃљрЃЦрЃбрЃўрЃЋрЃЮрЃЉрЃўрЃА рЃЏрЃЮрЃюрЃўрЃбрЃЮрЃарЃўрЃюрЃњрЃў
Рђб рЃЎрЃЮрЃЏрЃўрЃАрЃўрЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃљрЃгрЃўрЃџрЃћрЃЉрЃљ

­ЪЊД **рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ:**
Рђб рЃарЃћрЃљрЃџ-рЃЊрЃарЃЮрЃўрЃА рЃюрЃЮрЃбрЃўрЃцрЃўрЃЎрЃљрЃфрЃўрЃћрЃЉрЃў
Рђб рЃљрЃЊрЃЏрЃўрЃю-рЃърЃарЃЮрЃЋрЃљрЃўрЃЊрЃћрЃа рЃЎрЃЮрЃЏрЃБрЃюрЃўрЃЎрЃљрЃфрЃўрЃљ
Рђб рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃерЃћрЃбрЃДрЃЮрЃЉрЃўрЃюрЃћрЃЉрЃћрЃЉрЃў`;
  },

  pricing_system: () => {
    return `­Ъњ░ **рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ:**

­ЪЊѕ **рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃбрЃўрЃърЃћрЃЉрЃў:**
Рђб рЃЉрЃљрЃќрЃўрЃАрЃБрЃарЃў рЃцрЃљрЃАрЃћрЃЉрЃў - рЃЌрЃўрЃЌрЃЮрЃћрЃБрЃџрЃў рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃўрЃАрЃЌрЃЋрЃўрЃА
Рђб рЃАрЃћрЃќрЃЮрЃюрЃБрЃарЃў рЃцрЃљрЃАрЃћрЃЉрЃў - рЃќрЃљрЃцрЃ«рЃБрЃџрЃў (рЃЏрЃљрЃўрЃАрЃў-рЃАрЃћрЃЦрЃбрЃћрЃЏрЃЉрЃћрЃарЃў) / рЃќрЃљрЃЏрЃЌрЃљрЃарЃў
Рђб рЃЎрЃЋрЃўрЃарЃўрЃА рЃЊрЃдрЃћрЃћрЃЉрЃўрЃА рЃцрЃљрЃАрЃћрЃЉрЃў - рЃерЃљрЃЉрЃљрЃЌ-рЃЎрЃЋрЃўрЃарЃљ / рЃАрЃљрЃЏрЃБрЃерЃљрЃЮ рЃЊрЃдрЃћрЃћрЃЉрЃў
Рђб рЃ«рЃљрЃюрЃњрЃарЃФрЃџрЃўрЃЋрЃЮрЃЉрЃўрЃА рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ - 3+ рЃЊрЃдрЃўрЃАрЃЌрЃЋрЃўрЃА

РџЎ№ИЈ **рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ:**
Рђб рЃЊрЃдрЃћрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃљ ├Ќ рЃЉрЃљрЃќрЃўрЃАрЃБрЃарЃў рЃцрЃљрЃАрЃў
Рђб рЃАрЃћрЃќрЃЮрЃюрЃБрЃарЃў рЃЎрЃЮрЃћрЃцрЃўрЃфрЃўрЃћрЃюрЃбрЃў (1.2-1.5x)
Рђб рЃљрЃЊрЃљрЃЏрЃўрЃљрЃюрЃћрЃЉрЃўрЃА рЃарЃљрЃЮрЃЊрЃћрЃюрЃЮрЃЉрЃўрЃА рЃЏрЃўрЃ«рЃћрЃЊрЃЋрЃўрЃЌ
Рђб рЃЏрЃЮрЃАрЃљрЃЎрЃарЃћрЃЉрЃџрЃћрЃЉрЃў рЃЊрЃљ рЃњрЃљрЃЊрЃљрЃАрЃљрЃ«рЃљрЃЊрЃћрЃЉрЃў

­Ъј» **рЃАрЃърЃћрЃфрЃўрЃљрЃџрЃБрЃарЃў рЃЮрЃцрЃћрЃарЃћрЃЉрЃў:**
Рђб рЃљрЃЊрЃарЃћрЃБрЃџрЃў рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ
Рђб рЃ»рЃњрЃБрЃцрЃБрЃарЃў рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ
Рђб рЃџрЃЮрЃўрЃљрЃџрЃБрЃарЃў рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ`;
  }
};

const COMPONENT_SUMMARIES = {
  // Booking related components
  'BookingModal': 'рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃА рЃЏрЃЮрЃЊрЃљрЃџрЃБрЃарЃў рЃцрЃљрЃюрЃ»рЃљрЃарЃљ - рЃюрЃЮрЃЏрЃарЃћрЃЉрЃўрЃА рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃАрЃЌрЃЋрЃўрЃА, рЃљрЃАрЃћрЃЋрЃћ рЃцрЃљрЃАрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ рЃЊрЃљ рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ',
  'BookingForm': 'рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃА рЃцрЃЮрЃарЃЏрЃљ - рЃЏрЃЮрЃюрЃљрЃфрЃћрЃЏрЃћрЃЉрЃўрЃА рЃерЃћрЃДрЃЋрЃљрЃюрЃўрЃАрЃЌрЃЋрЃўрЃА, рЃЌрЃљрЃарЃўрЃдрЃћрЃЉрЃўрЃА рЃерЃћрЃарЃЕрЃћрЃЋрЃљ рЃЊрЃљ рЃбрЃћрЃарЃЏрЃўрЃюрЃћрЃЉрЃўрЃА рЃЊрЃљрЃЊрЃљрЃАрЃбрЃБрЃарЃћрЃЉрЃљ',
  'BookingAuth': 'рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃА рЃљрЃЋрЃбрЃЮрЃарЃўрЃќрЃљрЃфрЃўрЃљ - рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃўрЃА рЃерЃћрЃАрЃЋрЃџрЃљ/рЃарЃћрЃњрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃљ рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃА рЃърЃарЃЮрЃфрЃћрЃАрЃерЃў',
  'VehicleBookingForm': 'рЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃўрЃА рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃА рЃцрЃЮрЃарЃЏрЃљ - рЃЏрЃљрЃюрЃЦрЃљрЃюрЃћрЃЉрЃўрЃА, рЃљрЃбрЃЋрЃћрЃЉрЃўрЃА рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃљ',
  'HotelBookingForm': 'рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮрЃА рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃА рЃцрЃЮрЃарЃЏрЃљ - рЃЮрЃЌрЃљрЃ«рЃћрЃЉрЃўрЃА рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃљ рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮрЃћрЃЉрЃерЃў',

  // Admin components  
  'AdminBookings': 'рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃбрЃЮрЃарЃўрЃА рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ - рЃДрЃЋрЃћрЃџрЃљ рЃЉрЃарЃЮрЃюрЃўрЃарЃћрЃЉрЃўрЃА рЃюрЃљрЃ«рЃЋрЃљ/рЃарЃћрЃЊрЃљрЃЦрЃбрЃўрЃарЃћрЃЉрЃљ',
  'AdminUsers': 'рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ - рЃарЃЮрЃџрЃћрЃЉрЃўрЃА рЃерЃћрЃфрЃЋрЃџрЃљ, рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃљ',
  'AdminCommission': 'рЃЎрЃЮрЃЏрЃўрЃАрЃўрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ - рЃърЃарЃЮрЃЋрЃљрЃўрЃЊрЃћрЃарЃћрЃЉрЃўрЃА рЃЎрЃЮрЃЏрЃўрЃАрЃўрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ рЃЊрЃљ рЃњрЃљрЃЊрЃљрЃ«рЃЊрЃљ',
};

// Topic to modules mapping for targeted RAG analysis
const topicToModules = {
  booking: [
    'BookingService.ts', 'bookingService.ts', 'BookingForm.tsx', 
    'BookingModal.tsx', 'BookingAuth.tsx', 'UserBookingsSection.tsx',
    'AdminProviderBookings.tsx', 'ProviderBookings.tsx'
  ],
  pricing: [
    'pricing.ts', 'priceCodeService.ts', 'vehiclePricing.ts',
    'PriceBreakdownCard.tsx', 'PricingManager.tsx', 'PriceTag.tsx'
  ],
  admin: [
    'AdminCottages.tsx', 'AdminUsers.tsx', 'AdminHotels.tsx',
    'AdminProviders.tsx', 'MainDashboard.tsx'
  ],
  cottage: [
    'CottageForm.tsx', 'CottagePage.tsx', 'CottagesList.tsx'
  ],
  messaging: [
    'MessagingSystem.tsx', 'EnhancedMessagingSystem.tsx',
    'AdminMessagingDashboard.tsx', 'messagingService.ts'
  ]
};

class SiteSummary {
  // Get modules for specific topic
  static getModulesForTopic(topic) {
    return topicToModules[topic] || [];
  }

  // Get all available topics
  static getAvailableTopics() {
    return Object.keys(topicToModules);
  }

  // Check if query is asking for static information
  isStaticInfoQuery(message) {
    const staticQueries = [
      'рЃАрЃљрЃўрЃбрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃў', 
      'рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃЕрЃћрЃЏрЃў рЃАрЃљрЃўрЃбрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ',
      'рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃЕрЃћрЃЏрЃў рЃАрЃљрЃўрЃбрЃў',
      'рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ',
      'рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ',
      'рЃЏрЃЮрЃЎрЃџрЃћ рЃерЃћрЃ»рЃљрЃЏрЃћрЃЉрЃљ',
      'bullet point рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ'
    ];

    const lowerMessage = message.toLowerCase();
    return staticQueries.some(query => lowerMessage.includes(query.toLowerCase()));
  }
}

// Enhanced рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃћрЃЦрЃАрЃърЃЮрЃарЃбрЃў RAG рЃЮрЃърЃбрЃўрЃЏрЃўрЃќрЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА
module.exports = {
  BAKHMARO_PLATFORM_INFO,
  RESPONSE_TEMPLATES,

  // Enhanced Helper рЃцрЃБрЃюрЃЦрЃфрЃўрЃљ рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃўрЃАрЃЌрЃЋрЃўрЃА
  getStaticResponse: (queryType) => {
    const templates = RESPONSE_TEMPLATES;

    switch (queryType.toLowerCase()) {
      case 'platform_overview':
      case 'site_info':
      case 'full_info':
        return templates.platform_overview();

      case 'project_structure_detailed':
      case 'project_structure':
      case 'structure_detailed':
        return templates.project_structure_detailed();

      case 'component_mapping':
      case 'components_overview':
        return templates.component_mapping();

      case 'key_files_mapping':
      case 'important_files':
        return templates.key_files_mapping();

      case 'booking_process':
      case 'booking_system':
        return templates.booking_process();

      case 'admin_panel':
      case 'admin_features':
        return templates.admin_panel();

      case 'pricing_system':
      case 'pricing_info':
        return templates.pricing_system();

      default:
        return null;
    }
  },

  // NEW: RAG-specific query classification helper
  classifyForRAG: (message) => {
    const lowerMessage = message.toLowerCase();

    const ragPatterns = {
      'needs_multi_stage': [
        'рЃЏрЃЌрЃћрЃџрЃў рЃАрЃљрЃўрЃбрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ', 'рЃАрЃарЃБрЃџрЃў рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ', 'рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃарЃљрЃф рЃљрЃарЃўрЃА',
        'рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃљрЃюрЃљрЃџрЃўрЃќрЃў', 'рЃЏрЃЌрЃџрЃўрЃљрЃюрЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ'
      ],
      'needs_structure_focus': [
        'рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ', 'рЃљрЃарЃЦрЃўрЃбрЃћрЃЦрЃбрЃБрЃарЃљ', 'рЃЮрЃарЃњрЃљрЃюрЃўрЃќрЃљрЃфрЃўрЃљ', 'рЃЊрЃўрЃарЃћрЃЦрЃбрЃЮрЃарЃўрЃћрЃЉрЃў',
        'рЃцрЃЮрЃџрЃЊрЃћрЃарЃћрЃЉрЃў', 'рЃцрЃљрЃўрЃџрЃћрЃЉрЃўрЃА рЃњрЃљрЃюрЃџрЃљрЃњрЃћрЃЉрЃљ'
      ],
      'needs_component_focus': [
        'рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў', 'рЃЏрЃЮрЃЊрЃБрЃџрЃћрЃЉрЃў', 'рЃАрЃћрЃарЃЋрЃўрЃАрЃћрЃЉрЃў', 'React рЃЎрЃЮрЃЏрЃърЃЮрЃюрЃћрЃюрЃбрЃћрЃЉрЃў',
        'рЃцрЃБрЃюрЃЦрЃфрЃўрЃЮрЃюрЃљрЃџрЃў', 'UI рЃћрЃџрЃћрЃЏрЃћрЃюрЃбрЃћрЃЉрЃў'
      ],
      'needs_code_analysis': [
        'рЃЎрЃЮрЃЊрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў', 'рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў', 'рЃўрЃЏрЃърЃџрЃћрЃЏрЃћрЃюрЃбрЃљрЃфрЃўрЃљ', 'рЃљрЃџрЃњрЃЮрЃарЃўрЃЌрЃЏрЃћрЃЉрЃў',
        'рЃџрЃЮрЃњрЃўрЃЎрЃљ', 'рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃЎрЃЮрЃюрЃЎрЃарЃћрЃбрЃБрЃџрЃљрЃЊ'
      ]
    };

    for (const [type, patterns] of Object.entries(ragPatterns)) {
      if (patterns.some(pattern => lowerMessage.includes(pattern))) {
        return type;
      }
    }

    return 'general_rag';
  },

  // NEW: Get pre-built context for specific file types
  getPreBuiltContextForFiles: (fileTypes) => {
    const fileContexts = {
      'booking': {
        description: 'рЃ»рЃљрЃЋрЃерЃюрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃцрЃљрЃўрЃџрЃћрЃЉрЃў - BookingService.ts, BookingModal.tsx',
        keyFeatures: ['рЃарЃћрЃљрЃџ-рЃЊрЃарЃЮрЃўрЃА рЃ«рЃћрЃџрЃЏрЃўрЃАрЃљрЃгрЃЋрЃЊрЃЮрЃЏрЃЮрЃЉрЃљ', 'рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ', 'рЃЎрЃљрЃџрЃћрЃюрЃЊрЃљрЃарЃўрЃА рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ'],
        relatedFiles: ['src/services/bookingService.ts', 'src/components/BookingModal.tsx', 'src/components/Calendar.tsx']
      },
      'pricing': {
        description: 'рЃцрЃљрЃАрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃцрЃљрЃўрЃџрЃћрЃЉрЃў - рЃАрЃћрЃќрЃЮрЃюрЃБрЃарЃў рЃЊрЃљ рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃњрЃљрЃЏрЃЮрЃЌрЃЋрЃџрЃљ',
        keyFeatures: ['рЃАрЃћрЃќрЃЮрЃюрЃБрЃарЃў рЃцрЃљрЃАрЃћрЃЉрЃў', 'рЃЎрЃЋрЃўрЃарЃўрЃА рЃЊрЃдрЃћрЃћрЃЉрЃўрЃА рЃцрЃљрЃАрЃћрЃЉрЃў', 'рЃ«рЃљрЃюрЃњрЃарЃФрЃџрЃўрЃЋрЃЮрЃЉрЃўрЃА рЃцрЃљрЃАрЃЊрЃљрЃЎрЃџрЃћрЃЉрЃљ'],
        relatedFiles: ['src/utils/pricing.ts', 'src/utils/vehiclePricing.ts', 'src/components/PricingManager.tsx']
      },
      'admin': {
        description: 'рЃљрЃЊрЃЏрЃўрЃюрЃўрЃАрЃбрЃарЃљрЃфрЃўрЃБрЃџрЃў рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃцрЃљрЃўрЃџрЃћрЃЉрЃў',
        keyFeatures: ['рЃЏрЃЮрЃЏрЃ«рЃЏрЃљрЃарЃћрЃЉрЃџрЃћрЃЉрЃўрЃА рЃЏрЃљрЃарЃЌрЃЋрЃљ', 'рЃЎрЃЮрЃЏрЃўрЃАрЃўрЃћрЃЉрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ', 'рЃАрЃбрЃљрЃбрЃўрЃАрЃбрЃўрЃЎрЃљ'],
        relatedFiles: ['src/AdminUsers.tsx', 'src/AdminCottages.tsx', 'src/MainDashboard.tsx']
      },
      'ai': {
        description: 'AI рЃљрЃАрЃўрЃАрЃбрЃћрЃюрЃбрЃўрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃўрЃА рЃцрЃљрЃўрЃџрЃћрЃЉрЃў',
        keyFeatures: ['Groq API рЃўрЃюрЃбрЃћрЃњрЃарЃљрЃфрЃўрЃљ', 'рЃЦрЃљрЃарЃЌрЃБрЃџрЃў рЃћрЃюрЃўрЃА рЃЋрЃљрЃџрЃўрЃЊрЃљрЃфрЃўрЃљ', 'рЃЎрЃЮрЃЊрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў'],
        relatedFiles: ['backend/ai_controller.js', 'backend/services/groq_service.js', 'src/components/AIAssistantEnhanced.tsx']
      }
    };

    return fileTypes.map(type => fileContexts[type]).filter(Boolean);
  },

  // NEW: Get token-optimized summary
  getTokenOptimizedSummary: (maxTokens = 500) => {
    const baseInfo = BAKHMARO_PLATFORM_INFO;
    let summary = `­ЪЈћ№ИЈ рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА рЃЉрЃБрЃЎрЃўрЃюрЃњ рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃљ\n\n`;

    if (maxTokens > 200) {
      summary += `­ЪЊІ рЃЎрЃљрЃбрЃћрЃњрЃЮрЃарЃўрЃћрЃЉрЃў: рЃЎрЃЮрЃбрЃћрЃ»рЃћрЃЉрЃў, рЃАрЃљрЃАрЃбрЃБрЃЏрЃарЃЮрЃћрЃЉрЃў, рЃбрЃарЃљрЃюрЃАрЃърЃЮрЃарЃбрЃў, рЃфрЃ«рЃћрЃюрЃћрЃЉрЃў, рЃЌрЃЮрЃЋрЃџрЃЏрЃЮрЃЉрЃўрЃџрЃћрЃЉрЃў\n`;
      summary += `РџЎ№ИЈ рЃбрЃћрЃЦрЃюрЃЮрЃџрЃЮрЃњрЃўрЃћрЃЉрЃў: React/TypeScript + Node.js/Express + Firebase\n`;
      summary += `­Ъцќ AI: Groq API (Llama models) + рЃЦрЃљрЃарЃЌрЃБрЃџрЃў рЃћрЃюрЃўрЃА рЃЏрЃ«рЃљрЃарЃЊрЃљрЃГрЃћрЃарЃљ\n`;
    }

    if (maxTokens > 300) {
      summary += `­ЪћД рЃФрЃўрЃарЃўрЃЌрЃљрЃЊрЃў рЃцрЃБрЃюрЃЦрЃфрЃўрЃћрЃЉрЃў: рЃарЃћрЃљрЃџ-рЃЊрЃарЃЮрЃўрЃА рЃ»рЃљрЃЋрЃерЃюрЃљ, рЃљрЃЋрЃбрЃЮрЃЏрЃљрЃбрЃБрЃарЃў рЃцрЃљрЃАрЃћрЃЉрЃў, рЃљрЃЊрЃЏрЃўрЃю рЃърЃљрЃюрЃћрЃџрЃў\n`;
    }

    if (maxTokens > 400) {
      summary += `­ЪЊі рЃарЃЮрЃџрЃћрЃЉрЃў: Customer, Provider, Admin, Super Admin\n`;
      summary += `­ЪЈЌ№ИЈ рЃЊрЃћрЃърЃџрЃЮрЃўрЃЏрЃћрЃюрЃбрЃў: Replit Platform\n`;
    }

    return summary;
  },

  // рЃќрЃЮрЃњрЃљрЃЊрЃў рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ
  getPlatformInfo: () => BAKHMARO_PLATFORM_INFO,

  // Enhanced рЃерЃћрЃЏрЃЮрЃгрЃЏрЃћрЃЉрЃљ - рЃљрЃарЃўрЃА рЃЌрЃБ рЃљрЃарЃљ рЃЎрЃўрЃЌрЃ«рЃЋрЃљ "рЃАрЃбрЃљрЃбрЃўрЃЎрЃБрЃарЃў" рЃбрЃўрЃърЃўрЃА
  isStaticInfoQuery: (message) => {
    const staticQueries = [
      'рЃАрЃљрЃўрЃбрЃўрЃА рЃАрЃарЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃЊрЃћрЃбрЃљрЃџрЃћрЃЉрЃў', 
      'рЃњрЃљрЃюрЃАрЃљрЃќрЃдрЃЋрЃарЃБрЃџрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃЕрЃћрЃЏрЃў рЃАрЃљрЃўрЃбрЃўрЃА рЃљрЃдрЃгрЃћрЃарЃљ',
      'рЃарЃЮрЃњрЃЮрЃа рЃЏрЃБрЃерЃљрЃЮрЃЉрЃА рЃЕрЃћрЃЏрЃў рЃАрЃљрЃўрЃбрЃў',
      'рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА рЃАрЃбрЃарЃБрЃЦрЃбрЃБрЃарЃљ',
      'рЃЉрЃљрЃ«рЃЏрЃљрЃарЃЮрЃА рЃАрЃўрЃАрЃбрЃћрЃЏрЃљ',
      'рЃЏрЃЮрЃЎрЃџрЃћ рЃерЃћрЃ»рЃљрЃЏрЃћрЃЉрЃљ',
      'bullet point рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ'
    ];

    const lowerMessage = message.toLowerCase();
    return staticQueries.some(query => lowerMessage.includes(query.toLowerCase()));
  },

  // NEW: Check if query requires multi-stage processing
  requiresMultiStageRAG: (message) => {
    const multiStageIndicators = [
      'рЃЏрЃЌрЃћрЃџрЃў рЃАрЃљрЃўрЃбрЃўрЃА рЃерЃћрЃАрЃљрЃ«рЃћрЃЉ рЃЊрЃљрЃгрЃЋрЃарЃўрЃџрЃћрЃЉрЃўрЃЌрЃў рЃўрЃюрЃцрЃЮрЃарЃЏрЃљрЃфрЃўрЃљ',
      'рЃАрЃарЃБрЃџрЃў рЃърЃарЃЮрЃћрЃЦрЃбрЃўрЃА рЃљрЃюрЃљрЃџрЃўрЃќрЃў',
      'рЃДрЃЋрЃћрЃџрЃљрЃцрЃћрЃарЃў рЃарЃљрЃф рЃљрЃарЃўрЃА',
      'рЃЊрЃћрЃбрЃљрЃџрЃБрЃарЃў рЃљрЃдрЃгрЃћрЃарЃљ рЃЏрЃЌрЃћрЃџрЃў рЃърЃџрЃљрЃбрЃцрЃЮрЃарЃЏрЃўрЃА',
      'рЃЎрЃЮрЃЏрЃърЃџрЃћрЃЦрЃАрЃБрЃарЃў рЃљрЃюрЃљрЃџрЃўрЃќрЃў',
      'comprehensive analysis'
    ];

    const lowerMessage = message.toLowerCase();
    return multiStageIndicators.some(indicator => lowerMessage.includes(indicator));
  },
  
  // Get modules for specific topic
  getModulesForTopic: (topic) => {
    return SiteSummary.getModulesForTopic(topic);
  },

  // Get all available topics
  getAvailableTopics: () => {
    return SiteSummary.getAvailableTopics();
  }
};